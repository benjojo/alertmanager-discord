{
    "title": "Chart Values",
    "type": "object",
    "properties": {
        "replicaCount": {
            "type": "number",
            "description": "The number of replicas of the alertmanager-discord pod to deploy",
            "default": 1
        },
        "image": {
            "type": "object",
            "properties": {
                "repository": {
                    "type": "string",
                    "description": "The OCI compatible repository containing the image to deploy",
                    "default": "speckle/alertmanager-discord"
                },
                "pullPolicy": {
                    "type": "string",
                    "description": "Controls when the image should be pulled from the repository.",
                    "default": "Always"
                },
                "tag": {
                    "type": "string",
                    "description": "Overrides the image tag whose default is the chart appVersion.",
                    "default": "latest"
                }
            }
        },
        "imagePullSecrets": {
            "type": "array",
            "description": "If the image is in a private repository, pull secrets are required.",
            "default": [],
            "items": {}
        },
        "nameOverride": {
            "type": "string",
            "description": "Override the name of this Helm Release",
            "default": ""
        },
        "fullnameOverride": {
            "type": "string",
            "description": "Override the full name generated for this Helm Release",
            "default": ""
        },
        "serviceAccount": {
            "type": "object",
            "properties": {
                "create": {
                    "type": "boolean",
                    "description": "Specifies whether a service account should be created",
                    "default": true
                },
                "annotations": {
                    "type": "object",
                    "description": "Annotations to add to the service account",
                    "default": {}
                },
                "name": {
                    "type": "string",
                    "description": "The name of the service account to use. If not set and create is true, a name is generated using the fullname template",
                    "default": ""
                }
            }
        },
        "podAnnotations": {
            "type": "object",
            "description": "Annotations to apply to pods generated by this Helm Chart",
            "default": {}
        },
        "podSecurityContext": {
            "type": "object",
            "properties": {
                "fsGroup": {
                    "type": "number",
                    "description": "The group number in which the pod user will operate",
                    "default": 2000
                }
            }
        },
        "securityContext": {
            "type": "object",
            "properties": {
                "capabilities": {
                    "type": "object",
                    "properties": {
                        "drop": {
                            "type": "array",
                            "description": "The kernel capabilities to remove from this pod.",
                            "default": [
                                "ALL"
                            ],
                            "items": {
                                "type": "string"
                            }
                        }
                    }
                },
                "readOnlyRootFilesystem": {
                    "type": "boolean",
                    "description": "Deteremines whether the root file system is readonly.",
                    "default": true
                },
                "runAsNonRoot": {
                    "type": "boolean",
                    "description": "Deteremines whether the user is non-root.",
                    "default": true
                },
                "runAsUser": {
                    "type": "number",
                    "description": "The uid of the user under which the pod is run.",
                    "default": 1000
                }
            }
        },
        "service": {
            "type": "object",
            "properties": {
                "type": {
                    "type": "string",
                    "description": "The type of service (e.g. ClusterIP or Loadbalancer)",
                    "default": "ClusterIP"
                },
                "port": {
                    "type": "number",
                    "description": "The port to which alertmanager should push alerts",
                    "default": 9094
                }
            }
        },
        "resources": {
            "type": "object",
            "properties": {
                "limits": {
                    "type": "object",
                    "properties": {
                        "cpu": {
                            "type": "string",
                            "description": "The maximum CPU that will be made available to the pod",
                            "default": "100m"
                        },
                        "memory": {
                            "type": "string",
                            "description": "The maximum memory that will be made available to the pod. Above this value the pod runs the risk of being OOMKilled",
                            "default": "128Mi"
                        }
                    }
                },
                "requests": {
                    "type": "object",
                    "properties": {
                        "cpu": {
                            "type": "string",
                            "description": "The CPU that is requested by this pod when deployed, used for space allocation on nodes.",
                            "default": "50m"
                        },
                        "memory": {
                            "type": "string",
                            "description": "The memory that is requested by this pod when deployed, used for space allocation on nodes.",
                            "default": "64Mi"
                        }
                    }
                }
            }
        },
        "nodeSelector": {
            "type": "object",
            "description": "Assign the pods deployed by this Helm Chart to a specific node which matches the selector.",
            "default": {}
        },
        "tolerations": {
            "type": "array",
            "description": "Allows the pods deployed by this Helm Chart to tolerate specific criteria which may be found applied to nodes.",
            "default": [],
            "items": {}
        },
        "affinity": {
            "type": "object",
            "description": "The pods deployed by this Helm Chart will tend to this specific criteria which may be found applied to nodes.",
            "default": {}
        },
        "server": {
            "type": "object",
            "properties": {
                "discordWebhookSecret": {
                    "type": "object",
                    "properties": {
                        "name": {
                            "type": "string",
                            "description": "The name of the Kubernetes Secret containing the Discord webhook url. Must be in the same namespace as this helm chart is deployed.",
                            "default": "discord-webhook"
                        },
                        "key": {
                            "type": "string",
                            "description": "The key within the Opaque Kubernetes Secret containing the webhook value.",
                            "default": "discord-uri"
                        }
                    }
                }
            }
        },
        "ciliumNetworkPolicy": {
            "type": "object",
            "properties": {
                "enabled": {
                    "type": "boolean",
                    "description": "If enabled, deploys a Cilium Network Policy to restrict network ingress and egress to the pods deployed by this Helm Chart",
                    "default": false
                },
                "alertManagerSelectorLabels": {
                    "type": "object",
                    "description": "The labels expected to be applied to the AlertManager pods which will send data to this service. If Cilium Network Policy is enabled, ingress to this service is only allowed from a pod matching these labels.",
                    "default": {}
                }
            }
        }
    }
}
